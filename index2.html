<!DOCTYPE html>
<html>

<head>
  <title>My experiment</title>
  <script src="https://unpkg.com/jspsych@8.0.0"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.0.0"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-button-response@2.0.0"></script>

  <script src="stimuli/shtulman_2012_scientific_statements.js"></script>
  <script src="stimuli/Astronomy_block.js"></script>
  <script src="stimuli/Evolution_block.js"></script>
  <script src="stimuli/Fractions_block.js"></script>
  <script src="stimuli/Genetics_block.js"></script>
  <script src="stimuli/Matter_block.js"></script>
  <script src="stimuli/Mechanics_block.js"></script>
  <script src="stimuli/Physiology_block.js"></script>
  <script src="stimuli/Thermodynamics_block.js"></script>
  <script src="stimuli/Waves_block.js"></script>
  <script src="stimuli/Germs_block.js"></script>



  <script src="https://unpkg.com/@jspsych/plugin-survey-text@2.0.0"></script>
  <script src="https://unpkg.com/@jspsych/plugin-fullscreen@1.2.1"></script>
  <link href="https://unpkg.com/jspsych@8.0.0/css/jspsych.css" rel="stylesheet" type="text/css" />
</head>

<body></body>
<script>

/* initialize jsPsych */
  var jsPsych = initJsPsych({
  show_progress_bar: true,
  on_finish: function() {
    jsPsych.data.displayData();
  }
});

/* create timeline */
  var timeline = [];

//enter fullscreen mode
timeline.push({
  type: jsPsychFullscreen,
  fullscreen_mode: true
});

timeline.push({
  type: jsPsychHtmlKeyboardResponse,
  stimulus: 'This trial will be in fullscreen mode. Press any key to begin.',
  post_trial_gap:500
});

// define welcome message trial
  var welcome = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "Welcome to the experiment. Press any key to begin.", 
    post_trial_gap:500
  };

// add the welcome trial to the timeline variable
  timeline.push(welcome);
  
// create a short survey to collect a participant identifier
var participant_id_entry = {
   type: jsPsychSurveyText,
   questions: [{ prompt: "Please enter your participant ID (e.g. p1):", name: "participant_id" }],
   post_trial_gap:500,
   on_finish: function (data) {
     console.log(data.response)
     jsPsych.data.addProperties({
       participant: data.response.participant_id
     });
   }
 };

 timeline.push(participant_id_entry);

 /* Instructions so participants understand*/
var instructions = {
type: jsPsychHtmlKeyboardResponse,
stimulus: "<p>Welcome to the experiment!</p>" +
"<p>In this task, you will see a series of scientific statements.</p>" +
"<p>Your job is to decide whether each statement is true or false.</p>" +
"<p>Press 'z' if you think the statement is true and 'm' if you think it is false.</p>" +
"<p>Press any key to begin.</p>"
};
timeline.push(instructions);



  /* load in stimulus list */
  // IDEA: convert the csv to json format and store that item as a variable in .js code (loaded above)
  // each element in the variable scientific statements is one row in the csv, structured as an Object/ dictionary
  // you can view the structure by looking in the console
 //* console.log(scientific_statements)
  // MAIN TO DO: How can we systematically randomize all stimuli?


  var blocks=[];

    var Astronomy= 
    {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=30>"+ '<p>Astronomy Statements</p>',
    stimulus_duration:1000,
    };
    blocks.push(Astronomy);

   /* loop through each statement and create a trial */
  //let's store one of these elements
  console.log(Astronomy_block)
  stimulus_item = Astronomy_block[0]
  console.log(stimulus_item)

 Astronomy_block = jsPsych.randomization.shuffle(Astronomy_block);

 Astronomy_block.forEach(function(stimulus_item) {

    var Astronomy_trial={
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=6>" + stimulus_item['Statement'] + "</font></b>",
    prompt:"<p>Press 'z' if the statement is true, 'm' if the statement is false.</p>",
    choices: ["z", "m"],
    data: {
Category: stimulus_item['Category'],
Concept: stimulus_item['Concept'],
CorrectAnswer:stimulus_item['T1'] // Assuming 'T1' contains the correct answer ('T' for true, 'F' for false)
    },
    on_finish: function(data) { 
// Store if the response is correct
var correctKey = data.CorrectAnswer === "T" ? "z" : "m";
data.correct = data.response === correctKey;
    
}
}
blocks.push(Astronomy_trial);
 })
 var Evolution= 
    {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=30>"+ '<p>Evolution Statements</p>',
    stimulus_duration:1000,
    };
    blocks.push(Evolution);

   /* loop through each statement and create a trial */
  //let's store one of these elements
  console.log(Evolution_block)
  stimulus_item = Evolution_block[0]
  console.log(stimulus_item)

 Evolution_block = jsPsych.randomization.shuffle(Evolution_block);

 Evolution_block.forEach(function(stimulus_item) {

    var Evolution_trial={
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=6>" + stimulus_item['Statement'] + "</font></b>",
    prompt:"<p>Press 'z' if the statement is true, 'm' if the statement is false.</p>",
    choices: ["z", "m"],
    data: {
Category: stimulus_item['Category'],
Concept: stimulus_item['Concept'],
CorrectAnswer:stimulus_item['T1'] // Assuming 'T1' contains the correct answer ('T' for true, 'F' for false)
    },
    on_finish: function(data) { 
// Store if the response is correct
var correctKey = data.CorrectAnswer === "T" ? "z" : "m";
data.correct = data.response === correctKey;
    
}
}
blocks.push(Evolution_trial);
 })
 var Fractions= 
    {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=30>"+ '<p>Fraction Statements</p>',
    stimulus_duration:1000
  }
    blocks.push(Fractions);
   /* loop through each statement and create a trial */
  //let's store one of these elements
  console.log(Fractions_block),
  stimulus_item = Fractions_block[0],
  console.log(stimulus_item),

 Fractions_block = jsPsych.randomization.shuffle(Fractions_block);

 Fractions_block.forEach(function(stimulus_item) {

    var Fractions_trial={
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=6>" + stimulus_item['Statement'] + "</font></b>",
    prompt:"<p>Press 'z' if the statement is true, 'm' if the statement is false.</p>",
    choices: ["z", "m"],
    data: {
Category: stimulus_item['Category'],
Concept: stimulus_item['Concept'],
CorrectAnswer:stimulus_item['T1'] // Assuming 'T1' contains the correct answer ('T' for true, 'F' for false)
    },
    on_finish: function(data) { 
// Store if the response is correct
var correctKey = data.CorrectAnswer === "T" ? "z" : "m";
data.correct = data.response === correctKey;
    
}
}
blocks.push(Fractions_trial);
 })
 var Genetics= 
    {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=30>"+ '<p>Genetics Statements</p>',
    stimulus_duration:1000,
    }
    blocks.push(Genetics)
   /* loop through each statement and create a trial */
  //let's store one of these elements
  console.log(Genetics_block)
  stimulus_item = Genetics_block[0]
  console.log(stimulus_item)

 Genetics_block = jsPsych.randomization.shuffle(Genetics_block);

 Genetics_block.forEach(function(stimulus_item) {

    var Genetics_trial={
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=6>" + stimulus_item['Statement'] + "</font></b>",
    prompt:"<p>Press 'z' if the statement is true, 'm' if the statement is false.</p>",
    choices: ["z", "m"],
    data: {
Category: stimulus_item['Category'],
Concept: stimulus_item['Concept'],
CorrectAnswer:stimulus_item['T1'] // Assuming 'T1' contains the correct answer ('T' for true, 'F' for false)
    },
    on_finish: function(data) { 
// Store if the response is correct
var correctKey = data.CorrectAnswer === "T" ? "z" : "m";
data.correct = data.response === correctKey;
    
}
}
blocks.push(Genetics_trial);
 })

 var Germs= 
    {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=30>"+ '<p>Germs Statements</p>',
    stimulus_duration:1000,
    }
    blocks.push(Germs);

   /* loop through each statement and create a trial */
  //let's store one of these elements
  console.log(Germs_block)
  stimulus_item = Germs_block[0]
  console.log(stimulus_item)

 Germs_block = jsPsych.randomization.shuffle(Germs_block);

 Germs_block.forEach(function(stimulus_item) {

    var Germs_trial={
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=6>" + stimulus_item['Statement'] + "</font></b>",
    prompt:"<p>Press 'z' if the statement is true, 'm' if the statement is false.</p>",
    choices: ["z", "m"],
    data: {
Category: stimulus_item['Category'],
Concept: stimulus_item['Concept'],
CorrectAnswer:stimulus_item['T1'] // Assuming 'T1' contains the correct answer ('T' for true, 'F' for false)
    },
    on_finish: function(data) { 
// Store if the response is correct
var correctKey = data.CorrectAnswer === "T" ? "z" : "m";
data.correct = data.response === correctKey;
    
}}
blocks.push(Germs_trial);
 })

 var Matter= 
    {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=30>"+ '<p>Matter Statements</p>',
    stimulus_duration:1000,
    }
    blocks.push(Matter);


   /* loop through each statement and create a trial */
  //let's store one of these elements
  console.log(Matter_block)
  stimulus_item = Matter_block[0]
  console.log(stimulus_item)

 Matter_block = jsPsych.randomization.shuffle(Matter_block);

 Matter_block.forEach(function(stimulus_item) {

    var Matter_trial={
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=6>" + stimulus_item['Statement'] + "</font></b>",
    prompt:"<p>Press 'z' if the statement is true, 'm' if the statement is false.</p>",
    choices: ["z", "m"],
    data: {
Category: stimulus_item['Category'],
Concept: stimulus_item['Concept'],
CorrectAnswer:stimulus_item['T1'] // Assuming 'T1' contains the correct answer ('T' for true, 'F' for false)
    },
    on_finish: function(data) { 
// Store if the response is correct
var correctKey = data.CorrectAnswer === "T" ? "z" : "m";
data.correct = data.response === correctKey;
    
}
}
blocks.push(Matter_trial);
 }) 

 var Mechanics= 
    {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=30>"+ '<p>Mechanics Statements</p>',
    stimulus_duration:1000,
    }
    blocks.push(Mechanics);


   /* loop through each statement and create a trial */
  //let's store one of these elements
  console.log(Mechanics_block)
  stimulus_item = Mechanics_block[0]
  console.log(stimulus_item)

 Mechanics_block = jsPsych.randomization.shuffle(Mechanics_block);

 Mechanics_block.forEach(function(stimulus_item) {

    var Mechanics_trial={
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=6>" + stimulus_item['Statement'] + "</font></b>",
    prompt:"<p>Press 'z' if the statement is true, 'm' if the statement is false.</p>",
    choices: ["z", "m"],
    data: {
Category: stimulus_item['Category'],
Concept: stimulus_item['Concept'],
CorrectAnswer:stimulus_item['T1'] // Assuming 'T1' contains the correct answer ('T' for true, 'F' for false)
    },
    on_finish: function(data) { 
// Store if the response is correct
var correctKey = data.CorrectAnswer === "T" ? "z" : "m";
data.correct = data.response === correctKey;
    
}
}
blocks.push(Mechanics_trial);
 })
 var Physiology= {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=30>"+ '<p>Physiology Statements</p>',
    stimulus_duration:1000,
    }
    blocks.push(Physiology);

   /* loop through each statement and create a trial */
  //let's store one of these elements
  console.log(Physiology_block)
  stimulus_item = Physiology_block[0]
  console.log(stimulus_item)
    

 Physiology_block = jsPsych.randomization.shuffle(Physiology_block);

 Physiology_block.forEach(function(stimulus_item) {
var Physiology_trial = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=6>" + stimulus_item['Statement'] + "</font></b>",
    prompt:"<p>Press 'z' if the statement is true, 'm' if the statement is false.</p>",
    choices: ["z", "m"],
    data: {
Category: stimulus_item['Category'],
Concept: stimulus_item['Concept'],
CorrectAnswer:stimulus_item['T1'] // Assuming 'T1' contains the correct answer ('T' for true, 'F' for false)
    },
    on_finish: function(data) { 
// Store if the response is correct
var correctKey = data.CorrectAnswer === "T" ? "z" : "m";
data.correct = data.response === correctKey;
    
}
}
 });
 

blocks.push(Physiology);

 var Thermodynamics= 
    {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=30>"+ '<p>Thermodynamics Statements</p>',
    stimulus_duration:1000,
    }
    blocks.push(Thermodynamics);


   /* loop through each statement and create a trial */
  //let's store one of these elements
  console.log(Thermodynamics_block)
  stimulus_item = Thermodynamics_block[0]
  console.log(stimulus_item)

 Thermodynamics_block = jsPsych.randomization.shuffle(Thermodynamics_block);

 Thermodynamics_block.forEach(function(stimulus_item) {

    var Thermodynamics_trial={
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=6>" + stimulus_item['Statement'] + "</font></b>",
    prompt:"<p>Press 'z' if the statement is true, 'm' if the statement is false.</p>",
    choices: ["z", "m"],
    data: {
Category: stimulus_item['Category'],
Concept: stimulus_item['Concept'],
CorrectAnswer:stimulus_item['T1'] // Assuming 'T1' contains the correct answer ('T' for true, 'F' for false)
    },
    on_finish: function(data) { 
// Store if the response is correct
var correctKey = data.CorrectAnswer === "T" ? "z" : "m";
data.correct = data.response === correctKey;
    
}
}
blocks.push(Thermodynamics_trial);
 })
 var Waves= 
    {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=30>"+ '<p>Waves Statements</p>',
    stimulus_duration:1000,
    }
    blocks.push(Waves);

   /* loop through each statement and create a trial */
  //let's store one of these elements
  console.log(Waves_block)
  stimulus_item = Waves_block[0]
  console.log(stimulus_item)

 Waves_block = jsPsych.randomization.shuffle(Waves_block);

 Waves_block.forEach(function(stimulus_item) {

    var Waves_trial={
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<b><font size=6>" + stimulus_item['Statement'] + "</font></b>",
    prompt:"<p>Press 'z' if the statement is true, 'm' if the statement is false.</p>",
    choices: ["z", "m"],
    data: {
Category: stimulus_item['Category'],
Concept: stimulus_item['Concept'],
CorrectAnswer:stimulus_item['T1'] // Assuming 'T1' contains the correct answer ('T' for true, 'F' for false)
    },
    on_finish: function(data) { 
// Store if the response is correct
var correctKey = data.CorrectAnswer === "T" ? "z" : "m";
data.correct = data.response === correctKey;
    
}
}
blocks.push(Waves_trial)
 });

timeline.push(blocks);

 



// ask participant questions about the experiment
var reflection1 = {
  type: jsPsychSurveyText,
  questions: [{ prompt: "After completing these tasks, what do you believe the purpose of this experiment is?", name: "reflection1"}],
  on_finish: function(data) {
    console.log(data.response)
    jsPsych.data.addProperties({
      participant: data.response.reflection1
    });
  }
};

timeline.push(reflection1);

// Ask about technical difficulties
var reflection2 = {
  type: jsPsychSurveyText,
  questions: [{ prompt: "Did you experience any technical issues while completing the tasks?", name: "reflection2"}],
  on_finish: function(data) {
    console.log(data.response)
    jsPsych.data.addProperties({
      participant: data.response.reflection2
    });
  }
};


timeline.push(reflection2);

/* Debrief trial */
var debrief = {
type: jsPsychHtmlKeyboardResponse,
stimulus: "<p style='color: #E6E8FA;'>Thank you for participating!</p>" +
"<p style='color: #E6E8FA;'>The purpose of this experiment was to help understand how naives theories coexist with scientific knowledge!</p>"
};
timeline.push(debrief);


  // var trial = {
  //       type: jsPsychHtmlKeyboardResponse,
  //       prompt: "<p>Press z if the statement is true, m if the statement is false.<\p>",
  //       choices: ["z", "m"],
  //       // store elements from the stimulus item
  //       data: { 
  //         Category: stimulus_item['Category']
  //       },
  //       // format the statement a bit using html
  //       stimulus: "<b><font size=6>"+stimulus_item['Statement']+"</font></b>"
  //     }

  // timeline.push(trial);


  // /* start the experiment */
  jsPsych.run(timeline);

</script>

</html>
